<div class="grid gap-y-4 max-w-full overflow-x-hidden">
  <div class="col-12" *ngIf="blocks.length === 0">
    <p-card>
      <div class="flex flex-col items-center gap-4 py-4">
        <h2 class="text-xl font-bold">Blockchain Vazia</h2>
        <p class="text-center text-gray-400">
          Para começar, você precisa minerar o bloco gênesis.
          <br />
          Este será o primeiro bloco da blockchain e conterá apenas a coinbase
          transaction.
        </p>
        <div class="mining-controls">
          <div class="flex items-end gap-2 flex-wrap">
            <p-button
              label="{{
                mining ? (paused ? 'Continuar' : 'Pausar') : 'Iniciar Mineração'
              }}"
              icon="pi pi-play"
              (click)="mineBlock()"
            ></p-button>
            <p-button
              label="{{
                isContinuousMining ? 'Parar Simulação' : 'Iniciar Simulação'
              }}"
              icon="pi pi-sync"
              severity="secondary"
              (click)="toggleContinuousMining()"
            ></p-button>
            <div class="flex flex-col">
              <label class="mb-1 text-sm text-zinc-300"
                >Velocidade de Hash:</label
              >
              <p-select
                [options]="hashRateOptions"
                [(ngModel)]="hashRate"
                optionLabel="label"
                optionValue="value"
                (onChange)="updateHashRate()"
                placeholder="Selecione"
                styleClass="w-12rem"
              ></p-select>
            </div>
          </div>
        </div>

        <!-- Mining Progress -->
        <div *ngIf="mining && currentBlock" class="w-full max-w-2xl">
          <div class="flex flex-col gap-2 p-4 bg-zinc-800 rounded-lg">
            <div class="flex items-center justify-between">
              <span class="text-sm text-zinc-400">Status:</span>
              <span
                [class.text-yellow-500]="paused"
                [class.text-green-500]="foundValidHash"
                >{{
                  paused
                    ? "Pausado"
                    : foundValidHash
                    ? "Hash Válido Encontrado!"
                    : "Minerando..."
                }}</span
              >
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-zinc-400">Nonce:</span>
              <span class="font-mono">{{
                foundValidHash ? winningNonce : currentNonce
              }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-zinc-400">Hash Atual:</span>
              <span
                class="font-mono break-all"
                [class.text-green-500]="foundValidHash"
                >{{ currentHash }}</span
              >
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-zinc-400">Target:</span>
              <span class="font-mono break-all">{{ targetHash }}</span>
            </div>
            <div class="flex items-center justify-between">
              <span class="text-sm text-zinc-400">Hash Rate:</span>
              <div class="flex items-center gap-2">
                <p-selectButton
                  [options]="hashRateOptions"
                  [(ngModel)]="hashRate"
                  optionLabel="label"
                  optionValue="value"
                  (onChange)="onHashRateChange()"
                ></p-selectButton>
                <span *ngIf="hashRate === 0" class="font-mono text-green-500"
                  >{{ getHashRate() }} H/s</span
                >
              </div>
            </div>
            <div
              *ngIf="hashRate === 0"
              class="flex items-center justify-between"
            >
              <span class="text-sm text-zinc-400">Total de Hashes:</span>
              <span class="font-mono">{{
                hashesProcessed.toLocaleString()
              }}</span>
            </div>
            <div
              *ngIf="foundValidHash"
              class="mt-2 p-3 bg-green-500/20 rounded-lg border border-green-500"
            >
              <div class="flex flex-col gap-2">
                <div class="flex items-center gap-2">
                  <i class="pi pi-check-circle text-green-500"></i>
                  <span class="text-green-500 font-bold"
                    >Hash Válido Encontrado!</span
                  >
                </div>
                <p class="text-sm text-zinc-300">
                  O hash encontrado é menor que o target, o que significa que
                  este bloco é válido. Clique no botão abaixo para adicionar o
                  bloco à blockchain.
                </p>
                <div class="flex justify-end mt-2">
                  <p-button
                    label="Confirmar Bloco"
                    icon="pi pi-check"
                    severity="success"
                    (click)="confirmBlock()"
                  ></p-button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-card>
  </div>

  <div class="col-12" *ngIf="blocks.length > 0">
    <p-card header="Transações Pendentes">
      <div class="flex justify-content-between mb-3 flex-wrap gap-2">
        <p-button
          label="Nova Transação"
          icon="pi pi-plus"
          (click)="generateNewTransaction()"
        ></p-button>
      </div>

      <div class="overflow-x-auto">
        <p-table [value]="pendingTransactions" [paginator]="true" [rows]="5">
          <ng-template pTemplate="header">
            <tr>
              <th>ID</th>
              <th>Entradas (₿)</th>
              <th>Saídas (₿)</th>
              <th>Taxa (₿)</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-transaction>
            <tr>
              <td class="break-all">{{ transaction.id }}</td>
              <td>{{ getInputsTotal(transaction) }}</td>
              <td>{{ getOutputsTotal(transaction) }}</td>
              <td>{{ transaction.fee }}</td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </p-card>
  </div>

  <div class="col-12">
    <p-card header="Blockchain">
      <!-- Painel de apresentação dos parâmetros -->
      <div
        class="flex items-center justify-between bg-zinc-800 rounded-lg px-6 py-4 mb-6 shadow"
      >
        <div class="flex flex-col gap-1">
          <span class="text-xs text-zinc-400">Velocidade de Hash</span>
          <span class="font-mono text-base text-white">
            {{ getHashRateLabel() }}
          </span>
        </div>
        <p-button
          label="Editar Parâmetros"
          icon="pi pi-cog"
          (click)="openParamsDialog()"
          severity="secondary"
        ></p-button>
      </div>
      <!-- Fim do painel de apresentação dos parâmetros -->

      <div class="flex items-end gap-2 flex-wrap mb-8">
        <p-button
          label="{{
            mining ? (paused ? 'Continuar' : 'Pausar') : 'Iniciar Mineração'
          }}"
          icon="pi pi-play"
          (click)="mineBlock()"
        ></p-button>
        <p-button
          label="{{
            isContinuousMining ? 'Parar Simulação' : 'Iniciar Simulação'
          }}"
          icon="pi pi-sync"
          severity="secondary"
          (click)="toggleContinuousMining()"
        ></p-button>
      </div>

      <!-- Painel de Parâmetros -->
      <p-dialog
        [(visible)]="showParamsDialog"
        header="Parâmetros da Simulação"
        [modal]="true"
        [closable]="true"
        [style]="{ width: '350px' }"
      >
        <div class="flex flex-col gap-4">
          <div class="flex flex-col">
            <label class="mb-1 text-sm text-zinc-300">Velocidade de Hash</label>
            <p-select
              [options]="hashRateOptions"
              [(ngModel)]="editingHashRate"
              optionLabel="label"
              optionValue="value"
              placeholder="Selecione"
              styleClass="w-12rem"
              [appendTo]="'body'"
            ></p-select>
          </div>
        </div>
        <ng-template #footer>
          <div class="flex justify-end gap-2 mt-4">
            <p-button
              label="Cancelar"
              (click)="cancelParamsDialog()"
              styleClass="p-button-text"
            ></p-button>
            <p-button
              label="Salvar"
              (click)="saveParamsDialog()"
              [disabled]="
                editingHashRate === null || editingHashRate === undefined
              "
            ></p-button>
          </div>
        </ng-template>
      </p-dialog>

      <div
        class="flex gap-20 relative overflow-x-auto whitespace-nowrap w-full h-auto"
      >
        <!-- Blocos minerados -->
        <div
          *ngFor="let block of blocks; let i = index"
          class="block-element relative flex flex-col p-4 text-white rounded-lg shadow-md justify-center items-center min-w-40 h-20"
          [ngClass]="{
            genesis: block.height === 0,
            confirmed: block.height > 0 && i === 0,
            pending: block.height > 0 && i > 0
          }"
        >
          <span class="font-bold">#{{ block.height }}</span>
          <span class="text-xs break-all"
            >{{ block.hash.substring(0, 8) }}...</span
          >
          <span class="text-xs">{{
            block.timestamp | date : "dd/MM/yyyy HH:mm:ss"
          }}</span>
          <div class="flex items-center gap-2 text-xs">
            <i class="pi pi-hashtag"></i>
            <span class="font-mono">{{ block.nonce }}</span>
          </div>
        </div>
      </div>

      <!-- Painel de progresso de mineração -->
      <div *ngIf="mining && currentBlock" class="w-full max-w-2xl mx-auto my-8">
        <div class="flex flex-col gap-2 p-4 bg-zinc-800 rounded-lg">
          <div class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Status:</span>
            <span
              [class.text-yellow-500]="paused"
              [class.text-green-500]="foundValidHash"
              >{{
                paused
                  ? "Pausado"
                  : foundValidHash
                  ? "Hash Válido Encontrado!"
                  : "Minerando..."
              }}</span
            >
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Nonce:</span>
            <span class="font-mono">{{
              foundValidHash ? winningNonce : currentNonce
            }}</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Hash Atual:</span>
            <span
              class="font-mono break-all"
              [class.text-green-500]="foundValidHash"
              >{{ currentHash }}</span
            >
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Target:</span>
            <span class="font-mono break-all">{{ targetHash }}</span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Hash Rate:</span>
            <div class="flex items-center gap-2">
              <p-selectButton
                [options]="hashRateOptions"
                [(ngModel)]="hashRate"
                optionLabel="label"
                optionValue="value"
                (onChange)="onHashRateChange()"
              ></p-selectButton>
              <span *ngIf="hashRate === 0" class="font-mono text-green-500"
                >{{ getHashRate() }} H/s</span
              >
            </div>
          </div>
          <div *ngIf="hashRate === 0" class="flex items-center justify-between">
            <span class="text-sm text-zinc-400">Total de Hashes:</span>
            <span class="font-mono">{{
              hashesProcessed.toLocaleString()
            }}</span>
          </div>
          <div
            *ngIf="foundValidHash"
            class="mt-2 p-3 bg-green-500/20 rounded-lg border border-green-500"
          >
            <div class="flex flex-col gap-2">
              <div class="flex items-center gap-2">
                <i class="pi pi-check-circle text-green-500"></i>
                <span class="text-green-500 font-bold"
                  >Hash Válido Encontrado!</span
                >
              </div>
              <p class="text-sm text-zinc-300">
                O hash encontrado é menor que o target, o que significa que este
                bloco é válido. Clique no botão abaixo para adicionar o bloco à
                blockchain.
              </p>
              <div class="flex justify-end mt-2">
                <p-button
                  label="Confirmar Bloco"
                  icon="pi pi-check"
                  severity="success"
                  (click)="confirmBlock()"
                ></p-button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Visualização detalhada do bloco atual -->
      <div *ngIf="currentBlock" class="mt-6">
        <div class="block-details bg-zinc-800 rounded-lg p-4">
          <h3 class="text-lg font-bold mb-4">Estrutura do Bloco</h3>

          <!-- Cabeçalho do Bloco -->
          <div class="block-header mb-4 p-3 bg-zinc-700/50 rounded-lg">
            <div class="grid grid-cols-2 gap-4">
              <div class="flex flex-col">
                <span class="text-sm text-zinc-400">Versão</span>
                <span class="font-mono">{{ currentBlock.version }}</span>
              </div>
              <div class="flex flex-col">
                <span class="text-sm text-zinc-400">Timestamp</span>
                <span class="font-mono">{{
                  currentBlock.timestamp | date : "dd/MM/yyyy HH:mm:ss"
                }}</span>
              </div>
              <div class="flex flex-col">
                <span class="text-sm text-zinc-400">Bits</span>
                <span class="font-mono"
                  >0x{{ currentBlock.bits.toString(16) }}</span
                >
              </div>
              <div class="flex flex-col">
                <span class="text-sm text-zinc-400">Nonce</span>
                <span class="font-mono">{{ currentBlock.nonce }}</span>
              </div>
            </div>
          </div>

          <!-- Hash do Bloco Anterior -->
          <div class="previous-hash mb-4 p-3 bg-zinc-700/50 rounded-lg">
            <span class="text-sm text-zinc-400">Hash do Bloco Anterior</span>
            <div class="font-mono break-all mt-1">
              {{ currentBlock.previousHash }}
            </div>
          </div>

          <!-- Merkle Root -->
          <div class="merkle-root mb-4 p-3 bg-zinc-700/50 rounded-lg">
            <span class="text-sm text-zinc-400">Merkle Root</span>
            <div class="font-mono break-all mt-1">
              {{ currentBlock.merkleRoot || "Calculando..." }}
            </div>
          </div>

          <!-- Transações -->
          <div class="transactions mb-4">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm text-zinc-400">Transações</span>
              <span class="text-xs text-zinc-500"
                >{{ currentBlock.transactions.length }} transação{{
                  currentBlock.transactions.length !== 1 ? "s" : ""
                }}</span
              >
            </div>
            <div class="space-y-2">
              <div
                *ngFor="let tx of currentBlock.transactions"
                class="p-3 bg-zinc-700/50 rounded-lg"
              >
                <div class="flex justify-between items-center mb-2">
                  <span class="font-mono text-sm"
                    >{{
                      tx.id === "coinbase" ? "Coinbase" : tx.id.substring(0, 8)
                    }}...</span
                  >
                  <span
                    class="text-xs"
                    [class.text-green-500]="tx.id === 'coinbase'"
                  >
                    {{ tx.id === "coinbase" ? "Coinbase" : "Transação" }}
                  </span>
                </div>
                <div class="grid grid-cols-2 gap-2 text-xs">
                  <div>
                    <span class="text-zinc-400">Entradas:</span>
                    <span class="font-mono ml-1">{{ tx.inputs.length }}</span>
                  </div>
                  <div>
                    <span class="text-zinc-400">Saídas:</span>
                    <span class="font-mono ml-1">{{ tx.outputs.length }}</span>
                  </div>
                </div>
                <div *ngIf="tx.id === 'coinbase'" class="mt-2 text-xs">
                  <div class="flex items-center gap-2">
                    <span class="text-zinc-400">Endereço:</span>
                    <span class="font-mono text-green-500">{{
                      tx.outputs[0].address
                    }}</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <span class="text-zinc-400">Valor:</span>
                    <span class="font-mono text-green-500"
                      >{{ tx.outputs[0].amount }} ₿</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Hash do Bloco -->
          <div class="block-hash p-3 bg-zinc-700/50 rounded-lg">
            <div class="flex justify-between items-center mb-2">
              <span class="text-sm text-zinc-400">Hash do Bloco</span>
              <span
                class="text-xs"
                [class.text-green-500]="isHashValid(currentHash)"
                [class.text-red-500]="!isHashValid(currentHash)"
              >
                {{ isHashValid(currentHash) ? "Hash Válido" : "Hash Inválido" }}
              </span>
            </div>
            <div class="font-mono break-all mt-1">
              {{ currentHash || "Calculando..." }}
            </div>

            <!-- Comparação com Target -->
            <div class="mt-3 p-2 bg-zinc-800/50 rounded">
              <div class="flex justify-between items-center mb-1">
                <span class="text-xs text-zinc-400">Target</span>
                <span class="text-xs text-zinc-400">Hash Atual</span>
              </div>
              <div class="flex justify-between items-center">
                <div class="font-mono text-xs break-all flex-1 mr-2">
                  {{ targetHash }}
                </div>
                <div class="flex items-center gap-2">
                  <i
                    class="pi"
                    [class.pi-arrow-right]="!isHashValid(currentHash)"
                    [class.pi-check]="isHashValid(currentHash)"
                    [class.text-red-500]="!isHashValid(currentHash)"
                    [class.text-green-500]="isHashValid(currentHash)"
                  ></i>
                </div>
                <div class="font-mono text-xs break-all flex-1 ml-2">
                  {{ currentHash }}
                </div>
              </div>
              <div class="mt-2 text-xs text-zinc-400">
                O hash é válido quando é menor que o target.
                <span *ngIf="!isHashValid(currentHash)">
                  O hash atual é maior que o target, então precisamos continuar
                  minerando.
                </span>
                <span *ngIf="isHashValid(currentHash)">
                  O hash atual é menor que o target, então encontramos um hash
                  válido!
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-card>
  </div>
</div>

<p-dialog
  header="Adicionar essa transação na mempool?"
  [(visible)]="showNewTransactionDialog"
  [style]="{ width: '90vw', maxWidth: '1200px' }"
  [modal]="true"
  styleClass="p-0"
>
  <div class="flex flex-col gap-4 max-w-5xl mx-auto">
    <h2 class="font-bold text-lg">Adicionar essa transação na mempool?</h2>

    <div class="flex flex-col w-full">
      <!-- Header -->
      <div
        class="p-2 lg:p-4 border-zinc-700 border"
        [class.border-b-0]="!getTransactionError()"
      >
        <div class="text-sm font-bold text-zinc-300">
          {{ currentDateTime }}
        </div>
        <div class="flex items-center gap-2">
          <strong>Volume:</strong>
          <span
            [class.text-red-500]="
              getTransactionError()?.includes('valor total')
            "
          >
            {{ getInputsTotal(newTransaction) }} ₿
          </span>
        </div>
        <div class="flex items-center gap-2">
          <strong>Taxas:</strong>
          <span [class.text-red-500]="newTransaction.fees < 0">
            {{ newTransaction.fees }} ₿ ({{ getTransactionFeeRate() }} sats/vB)
          </span>
        </div>
      </div>

      <!-- Error Message -->
      <div
        *ngIf="getTransactionError()"
        class="p-3 bg-red-500 text-white border border-zinc-700 border-t-0 border-b-0 flex items-center gap-2"
      >
        <i class="pi pi-exclamation-circle"></i>
        <span>{{ getTransactionError() }}</span>
      </div>

      <!-- Transaction container -->
      <div class="flex flex-col lg:flex-row justify-between">
        <!-- Inputs -->
        <div
          class="w-full p-2 lg:w-1/2 lg:p-4 border-zinc-700 border border-b-0 lg:border-b lg:border-r-0"
        >
          <div class="flex justify-between items-center mb-2 lg:mb-4">
            <h3 class="text-lg font-bold">De</h3>
            <p-button
              *ngIf="isEditing"
              icon="pi pi-plus"
              severity="secondary"
              size="small"
              (click)="addInput()"
              pTooltip="Adicionar entrada"
              tooltipPosition="left"
            ></p-button>
          </div>
          <div
            *ngFor="let input of newTransaction.inputs; let i = index"
            class="flex flex-col gap-2 py-2"
          >
            <div class="flex items-center gap-2">
              <span
                class="flex items-center justify-center w-7 h-7 bg-zinc-700 rounded-full text-sm"
              >
                {{ i + 1 }}
              </span>
              <ng-container *ngIf="isEditing">
                <input
                  pInputText
                  [(ngModel)]="input.address"
                  class="flex-1 font-mono text-sm"
                  placeholder="Endereço"
                />
                <p-button
                  icon="pi pi-trash"
                  severity="danger"
                  size="small"
                  (click)="removeInput(i)"
                  [disabled]="newTransaction.inputs.length === 1"
                  pTooltip="Remover entrada"
                  tooltipPosition="left"
                ></p-button>
              </ng-container>
              <ng-container *ngIf="!isEditing">
                <span class="flex-1 font-mono text-sm">{{
                  input.address
                }}</span>
              </ng-container>
            </div>
            <div class="flex items-center gap-2 ml-9">
              <ng-container *ngIf="isEditing">
                <p-inputNumber
                  [(ngModel)]="input.amount"
                  mode="decimal"
                  [minFractionDigits]="8"
                  [maxFractionDigits]="8"
                  (onInput)="calculateFee()"
                  class="flex-1"
                  placeholder="Valor"
                ></p-inputNumber>
              </ng-container>
              <ng-container *ngIf="!isEditing">
                <span class="flex-1">{{ input.amount }} ₿</span>
              </ng-container>
            </div>
          </div>
        </div>

        <!-- Outputs -->
        <div class="w-full p-2 lg:w-1/2 lg:p-4 border-zinc-700 border">
          <div class="flex justify-between items-center mb-2 lg:mb-4">
            <h3 class="text-lg font-bold">Para</h3>
            <p-button
              *ngIf="isEditing"
              icon="pi pi-plus"
              severity="secondary"
              size="small"
              (click)="addOutput()"
              pTooltip="Adicionar saída"
              tooltipPosition="left"
            ></p-button>
          </div>
          <div
            *ngFor="let output of newTransaction.outputs; let i = index"
            class="flex flex-col gap-2 py-2"
          >
            <div class="flex items-center gap-2">
              <span
                class="flex items-center justify-center w-7 h-7 bg-zinc-700 rounded-full text-sm"
              >
                {{ i + 1 }}
              </span>
              <ng-container *ngIf="isEditing">
                <input
                  pInputText
                  [(ngModel)]="output.address"
                  class="flex-1 font-mono text-sm"
                  placeholder="Endereço"
                />
                <p-button
                  icon="pi pi-trash"
                  severity="danger"
                  size="small"
                  (click)="removeOutput(i)"
                  [disabled]="newTransaction.outputs.length === 1"
                  pTooltip="Remover saída"
                  tooltipPosition="left"
                ></p-button>
              </ng-container>
              <ng-container *ngIf="!isEditing">
                <span class="flex-1 font-mono text-sm">{{
                  output.address
                }}</span>
              </ng-container>
            </div>
            <div class="flex items-center gap-2 ml-9">
              <ng-container *ngIf="isEditing">
                <p-inputNumber
                  [(ngModel)]="output.amount"
                  mode="decimal"
                  [minFractionDigits]="8"
                  [maxFractionDigits]="8"
                  (onInput)="calculateFee()"
                  class="flex-1"
                  placeholder="Valor"
                ></p-inputNumber>
              </ng-container>
              <ng-container *ngIf="!isEditing">
                <span class="flex-1">{{ output.amount }} ₿</span>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex flex-col gap-4 lg:flex-row lg:justify-between">
      <div class="flex gap-2 lg:gap-4 w-full">
        <ng-container *ngIf="!isEditing">
          <p-button
            label="Editar"
            severity="contrast"
            variant="outlined"
            raised="true"
            class="w-full"
            styleClass="w-full"
            icon="pi pi-pencil"
            (click)="editTransaction()"
          />
          <p-button
            label="Recriar"
            severity="contrast"
            variant="outlined"
            class="w-full"
            styleClass="w-full"
            icon="pi pi-replay"
            (click)="generateNewTransaction()"
          />
        </ng-container>
        <ng-container *ngIf="isEditing">
          <p-button
            label="Salvar Alterações"
            [severity]="getTransactionError() ? 'danger' : 'success'"
            class="w-full"
            styleClass="w-full"
            icon="pi pi-check"
            (click)="isEditing = false"
            [pTooltip]="getTransactionError() || undefined"
            [tooltipDisabled]="!getTransactionError()"
            tooltipPosition="top"
          />
          <p-button
            label="Descartar Alterações"
            severity="danger"
            variant="outlined"
            class="w-full"
            styleClass="w-full"
            icon="pi pi-times"
            (click)="generateNewTransaction()"
          />
        </ng-container>
      </div>
      <div class="flex flex-col gap-2 lg:gap-4 lg:flex-row w-full">
        <p-button
          label="Confirmar Transação"
          [severity]="getTransactionError() ? 'danger' : 'contrast'"
          [raised]="!isEditing"
          class="w-full"
          styleClass="w-full"
          icon="pi pi-check"
          (click)="submitTransaction(newTransaction)"
          [disabled]="!validateTransaction(newTransaction) || isEditing"
          [pTooltip]="getTransactionError() || undefined"
          [tooltipDisabled]="!getTransactionError()"
          tooltipPosition="top"
        />
        <p-button
          label="Cancelar Transação"
          variant="outlined"
          class="w-full"
          styleClass="w-full"
          icon="pi pi-times"
          (click)="showNewTransactionDialog = false"
          [disabled]="isEditing"
        />
      </div>
    </div>
  </div>
</p-dialog>
