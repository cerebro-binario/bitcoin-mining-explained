@let data = event.data; @let block = data?.block; @let visual = event.type |
eventLogVisual;
<div
  class="py-1 flex flex-col gap-1"
  [ngClass]="{
    'text-green-400':
      event.state === 'completed' &&
      event.type === 'block-mined',
    'text-red-400':
      event.state === 'failed' ||
      (event.state === 'completed' &&
        (event.type === 'peer-disconnected')),
    'text-blue-400':
      event.state === 'pending' ||
      (event.state === 'completed' &&
        (event.type === 'block-received' || event.type === 'peer-search')),
  }"
>
  <!-- Header -->
  <div>
    <span class="font-mono mr-2 text-zinc-400">{{
      event.timestamp | date : "shortTime"
    }}</span>
    <i [class]="visual.icon + ' mr-1 text-xs'"></i>
    <span>{{ event.type | eventLogMessage : event.data }}</span>
    <span *ngIf="data?.peerId && data?.peerId !== event.minerId">
      [peer #{{ data?.peerId }}]</span
    >
    <span *ngIf="event.state === 'pending'" class="inline-flex items-center">
      <span class="animate-spin ml-1"
        ><svg class="w-3 h-3" viewBox="0 0 24 24">
          <circle
            class="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            stroke-width="3"
            fill="none"
          />
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
          />
        </svg>
      </span>
    </span>
  </div>
  <!-- Body -->
  <div>
    <div class="ml-4 flex items-center gap-1.5" *ngIf="block">
      <ng-container *ngFor="let part of block | blockInfoParts">
        <span [ngClass]="part.class" class="event-block-part">{{
          part.value
        }}</span>
      </ng-container>
    </div>
  </div>
  <!-- Logs -->
  <div class="relative ml-4">
    <!-- Linha vertical da timeline -->
    <div class="absolute left-0 top-0 w-0.5 h-full bg-zinc-700"></div>
    <ng-container *ngFor="let log of event.logs; let last = last">
      <div class="flex items-start relative mb-2">
        <!-- Dot da timeline -->
        <div
          class="absolute left-0 top-1/2 -translate-y-1/2 flex flex-col items-center"
        >
          <div
            class="w-3 h-0.5 bg-zinc-700"
            [ngClass]="visual.color"
            [style.backgroundColor]="visual.color ? '' : '#60a5fa'"
          ></div>
        </div>
        <!-- ConteÃºdo do log -->
        <div class="ml-6 w-full">
          <app-event-log [log]="log" [event]="event"></app-event-log>
        </div>
      </div>
    </ng-container>
  </div>
</div>
