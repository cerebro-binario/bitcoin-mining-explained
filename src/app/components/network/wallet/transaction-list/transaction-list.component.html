<div class="w-full h-full flex flex-col">
  <table class="min-w-full text-sm text-left text-zinc-300">
    <thead class="bg-zinc-800 text-zinc-400">
      <tr>
        <th class="px-3 py-2 font-semibold">Data/Hora</th>
        <th class="px-3 py-2 font-semibold">Tipo</th>
        <th class="px-3 py-2 font-semibold">Valor (BTC)</th>
        <th class="px-3 py-2 font-semibold">Endereço</th>
        <th class="px-3 py-2 font-semibold">Status</th>
        <th class="px-3 py-2 font-semibold">TxID</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngIf="transactions.length === 0">
        <td colspan="6" class="px-3 py-4 text-center text-zinc-500 italic">
          Nenhuma transação encontrada.
        </td>
      </tr>
      <tr *ngFor="let tx of transactions">
        <td class="px-3 py-2">
          {{
            tx.timestamp ? (tx.timestamp | date : "dd/MM/yyyy HH:mm:ss") : "—"
          }}
        </td>
        <td
          class="px-3 py-2"
          [ngClass]="{
            'text-green-400': tx.type === 'Recebida',
            'text-red-400': tx.type === 'Enviada',
            'text-yellow-400': tx.type === 'Coinbase'
          }"
        >
          <ng-container [ngSwitch]="tx.type">
            <i
              *ngSwitchCase="'Recebida'"
              class="pi pi-arrow-down-left mr-1"
            ></i>
            <i *ngSwitchCase="'Enviada'" class="pi pi-arrow-up-right mr-1"></i>
            <i *ngSwitchCase="'Coinbase'" class="pi pi-star-fill mr-1"></i>
            <i *ngSwitchDefault class="pi pi-info-circle mr-1"></i>
          </ng-container>
          {{ tx.type }}
        </td>
        <td class="px-3 py-2">{{ tx.value / 100000000 | number : "1.8-8" }}</td>
        <td class="px-3 py-2">
          <span
            class="inline-flex items-center gap-1"
            [ngClass]="{
              'text-green-300': tx.addressType === 'bip44',
              'text-blue-300': tx.addressType === 'bip49',
              'text-purple-300': tx.addressType === 'bip84'
            }"
          >
            <span class="inline-block align-middle" style="width: 1.2em">
              <i
                *ngIf="!walletAddresses.includes(tx.address)"
                class="pi pi-external-link text-yellow-400"
                title="Endereço externo"
              ></i>
            </span>
            {{ tx.address }}
          </span>
        </td>
        <td class="px-3 py-2">{{ tx.status }}</td>
        <td
          class="px-3 py-2 font-mono text-xs text-blue-300 truncate max-w-[180px]"
          [title]="tx.id"
        >
          {{ tx.id }}
        </td>
      </tr>
    </tbody>
  </table>
</div>
