<div class="flex flex-col items-start">
  <p-table [value]="[1]" class="p-datatable-sm w-full mb-2">
    <!-- Header -->
    <ng-template pTemplate="header">
      <tr>
        <th style="width: 10%"></th>
        <th style="width: 40%">Hexadecimal</th>
        <th style="width: 50%">Decimal</th>
      </tr>
    </ng-template>

    <!-- Linhas principais -->
    <ng-template pTemplate="body" let-item>
      <tr>
        <td class="font-bold">Hash</td>

        <td class="font-mono text-right">{{ hash || "(vazio)" }}</td>

        <td class="font-mono text-right">{{ hashDecimal || "(vazio)" }}</td>
      </tr>
      <tr>
        <td class="font-bold">Alvo</td>

        <td class="font-mono text-right">{{ targetHash || "(vazio)" }}</td>

        <td class="font-mono text-right">
          {{ targetHashDecimal || "(vazio)" }}
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div class="relative w-full h-8 rounded-md border-2 border-transparent">
    <div
      [ngClass]="{
        'absolute flex flex-col items-center': true,
        'text-green-500': isHashBelowTarget,
        'text-rose-700': !isHashBelowTarget
      }"
      [ngStyle]="{
        right: targetPosition + '%',
        bottom: '-4px',
        transform: 'translateX(50%)'
      }"
    >
      <span>
        {{ shortenValue(targetHash, 4) }}
      </span>
      <i class="pi pi-sort-down-fill"></i>
    </div>
  </div>

  <!-- Barra vertical -->
  <div
    #bar
    class="relative w-full h-8 bg-gray-200 rounded-md overflow-hidden border-2 border-gray-400 cursor-grab"
    (mousedown)="startDraggingTarget()"
  >
    <!-- Ãrea do Target (vermelha) -->
    <div
      #targetArea
      [ngClass]="{
        'absolute h-full w-full cursor-grab select-none': true,
        'bg-green-500': isHashBelowTarget,
        'bg-rose-700': !isHashBelowTarget
      }"
      [ngStyle]="{ right: targetPosition + '%' }"
    ></div>

    <!-- Linha do Hash (verde) -->
    <div
      #hashLine
      class="absolute w-1 h-full bg-green-900 pointer-events-none opacity-70"
      [ngStyle]="{ right: hashPosition + '%' }"
    ></div>
  </div>
  <div *ngIf="hash" class="relative w-full overflow-visible">
    <div
      class="absolute flex flex-col items-center dark:text-slate-300 text-slate-700"
      [ngStyle]="{
        right: hashPosition + '%',
        top: '-4px',
        transform: 'translateX(calc(50% - 0.25rem))'
      }"
    >
      <i class="pi pi-sort-up-fill"></i>
      <span>
        {{ shortenValue(hash, 4) }}
      </span>
    </div>
  </div>
  <div class="mt-2">
    @if(isHashBelowTarget) {

    <p-message
      severity="success"
      variant="simple"
      size="small"
      icon="pi pi-check"
      >Hash dentro do target</p-message
    >
    } @else {
    <p-message
      severity="error"
      variant="simple"
      size="small"
      icon="pi pi-times-circle"
      >Hash fora do target</p-message
    >}
  </div>
</div>
